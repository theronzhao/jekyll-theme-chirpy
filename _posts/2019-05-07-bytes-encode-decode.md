---
title: 字符编码
date: 2019-05-07 16:44:00 +0800
categories: [计算机科学]
tags: [计算机科学]
---
## 位、字节、字符的区别

位（bit）：是计算机 内部数据 储存的最小单位，11001100是一个八位二进制数。

字节（byte）：是计算机中 数据处理 的基本单位，习惯上用大写  B  来表示,1B（byte,字节）= 8bit（位）

字符：是指计算机中使用的字母、数字、字和符号

计算机中的CPU位数指的是CPU一次能处理的最大位数。例如32位计算机的CPU一次最多能处理32位数据。

ASCIIS码： 
>1个英文字母（不分大小写）= 1个字节的空间  
>1个中文汉字 = 2个字节的空间  
>1个ASCII码 = 一个字节  

Unicode编码：

> 1个英文字符 = 2个字节  
> 英文标点  = 2个字节  
> 1个中文（含繁体） = 2个字节  
> 中文标点 = 2个字节                     

UTF-8编码：
>1个英文字符 = 1个字节  
>英文标点  = 1个字节  
>1个中文（含繁体） = 3个字节  
>中文标点 = 3个字节  
>
>一个字节一个字符的 0xxx xxxx  
>两个字节一个字符的 110x xxxx 10xx xxxx  
>三个字节一个字符的 1110 xxxx 10xx xxxx 10xx xxxx  

## 字符串和编码

因为计算机只能处理数字，如果要处理文本，就必须先把文本转换为数字才能处理。最早的计算机在设计时采用 8 个比特（bit）作为一个字节（byte），所以，一个字节能表示的最大的整数就是 255（二进制11111111=十进制 255），如果要表示更大的整数，就必须用更多的字节。比如两个字节可以表示的最大整数是 65535 ，4 个字节可以表示的最大整数是4294967295 。

最早只有 127 个字母被编码到计算机里，也就是大小写英文字母、数字和一些符号，这个编码表被称为ASCII 编码，比如大写字母 A 的编码是 65 ，小写字母 z 的编码是 122 。

全世界有上百种语言,Unicode 把所有语言都统一到一套编码里,用两个字节表示一个字符（如果要用到非常偏僻的字符，就需要 4 个字节）

但是，如果你写的文本基本上全部是英文的话，用 Unicode 编码比 ASCII 编码需要多一倍的存储空间，所以，又出现了把 Unicode 编码转化为“可变长编码”的 UTF-8 编码。

UTF-8 编码把一个 Unicode 字符根据不同的数字大小编码成 1-6 个字节，常用的英文字母被编码成 1 个字节，汉字通常是 3 个字节，只有很生僻的字符才会被编码成 4-6 个字节。

## Python  的字符串

Python 3 版本中，字符串是以 Unicode 编码的

对于单个字符的编码，Python 提供了 ord() 函数获取字符的整数表示，chr() 函数把编码转换为对应的字符

```python
>>> ord('A')
65
>>> ord('中')
20013
>>> chr(66)
'B'
>>> chr(25991)
'文'
```

以 Unicode 表示的 str 通过 encode() 方法可以编码为指定的 bytes ，例如

```python
>>> 'ABC'.encode('ascii')
b'ABC'
>>> '中文'.encode('utf-8')
b'\xe4\xb8\xad\xe6\x96\x87'
>>> '中文'.encode('ascii')
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
    UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-1:ordinal not in range(128)
```

含有中文的 str 无法用 ASCII 编码，因为中文编码的范围超过了 ASCII 编码的范围，Python 会报错。