---
title: 详解top命令
date: 2020-08-05 20:37:32 +0800
categories: [Linux]
tags: [Linux]
---

## top

- 能够实时显示系统中各个进程的资源占用信息，类似于Windows的任务管理器。

```shell
top - 23:38:40 up 28 days, 37 min,  1 user,  load average: 0.00, 0.01, 0.05
	23:38:40	# 当前系统时间
	up 28 days, 37 min	# 从开机后运行的时间
	1 user	# 当前系统一个用户登录在线
	load average: 0.00, 0.01, 0.05	# 1，5，15min的系统平均负载
```

​	第一行显示当前时间、系统的运行时间、登录的用户数、以及系统的平均负载（最近一分钟的平均负载，最近五分钟的，最近15分钟的）。值越大说明系统的负载越高。由于进程短期的突发性活动，出现最近1分钟的高负载值也很常见，但如果近15分钟内的平均负载都很高，就说明系统可能有问题。通常，如果系统的负载值超过了2，就说明系统比较繁忙了



```shell
Tasks: 100 total,   2 running,  98 sleeping,   0 stopped,   0 zombie
	100 total	# 系统进程数
	2 running	# 正在运行的进程数
	98 sleeping	# 睡眠的进程数
	0 stopped	# 停止的进程数
	0 zombie	# 僵尸化的进程数
```

​	第二行显示了进程概要信息——总共102个进程，2个正在运行，98个休眠，0个停止，0个僵尸化



```shell
%Cpu(s):  0.3 us,  0.0 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
	us	用户空间占用cpu时间百分比，如果是多核，这个数值表示占用的平均百分比，可以按1进行多核统计和平均统计切换
	sy	内核空间占用cpu时间百分比，后续同上
	ni	用户空间改变过优先级的进程占用cpu时间百分比
	id	空闲时间占用cpu的百分比
	wa	等待输入输出占用cpu时间百分比
	hi	硬中断占用cpu时间百分比
	si	软中断占用cpu时间百分比
	st	当有虚拟机时，虚拟 CPU 等待实际 CPU 的时间百分比
```

​	第三行显示了CPU的概要信息—— 根据进程的属主（用户还是系统）和进程的状态（运行、空闲还是等待）将CPU利用率分成几类输出.按照时间占用计算CPU使用百分比，单位为秒



```shell
KiB Mem :  1882000 total,    77896 free,   531984 used,  1272120 buff/cache
	total：内存总量
    free：内存剩余总量
    used：内存使用数量
    buff/cached：用于缓冲的内存数量
```

​	第四行显示了系统物理内存的概要信息——总共有多少内存，当前用了多少，还有多少空闲



```shell
KiB Swap:        0 total,        0 free,        0 used.  1139772 avail Mem
	total：交换区总量
	free：空闲交换区数量
	used：使用交换区数量
```

​	第五行为交换分区（虚拟内存）概要信息



```shell
  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND                         
 1048 root      20   0   50088    916    584 R  1.0  0.0 294:04.53 rshim
 30269 mongod    20   0 1592428  80096   4488 S  0.3  4.3  65:25.31 mongod
	PR	优先级
	NI	进程的谦让度值
	VIRT	进程占用的虚拟内存总量
	RES	进程占用的物理内存总量
	SHR	进程和其他进程共享的内存总量
	S	进程的状态（D代表可中断的休眠状态，R代表在运行状态，S代表休眠状态，T代表跟踪状态或停止状态，Z代表僵化状态）
	%CPU	进程使用的CPU时间比例
	%MEM	进程使用的内存占可用内存的比例
	TIME+	自进程启动到目前为止的CPU时间总量
	COMMAND	进程所对应的命令行名称，也就是启动的程序名
```

​	最后一部分显示了当前运行中的进程的详细列表